	<style type="text/css">

	/* ignore this line */
	/* .container { margin:30px; }*/

	.twitter-typeahead {
	    width: 100%;
	    position: relative;
	}

	.twitter-typeahead .tt-query,
	.twitter-typeahead .tt-hint {
	    margin-bottom: 0;
	    width:100%;
	    height: 34px;
	    position: absolute;
	    top:0;
	    left:0;
	}
	.twitter-typeahead .tt-hint {
	    color:#a1a1a1;
	    z-index: 1;
	    padding: 6px 12px;
	    border:1px solid transparent;
	}
	.twitter-typeahead .tt-query {
	    z-index: 2;
	    border-radius: 4px!important;
	    /* add these 2 statements if you have an appended input group */
	    border-top-right-radius: 0!important;
	    border-bottom-right-radius: 0!important;
	    /* add these 2 statements if you have an prepended input group */
	   /*  border-top-left-radius: 0!important;
	    border-bottom-left-radius: 0!important; */
	}

	.tt-dropdown-menu {
	    min-width: 100%;
	    margin-top: 2px;
	    padding: 5px 0;
	    background-color: #fff;
	    border: 1px solid #ccc;
	    border: 1px solid rgba(0,0,0,.2);
	    *border-right-width: 2px;
	    *border-bottom-width: 2px;
	    -webkit-border-radius: 6px;
	    -moz-border-radius: 6px;
	    border-radius: 6px;
	    -webkit-box-shadow: 0 5px 10px rgba(0,0,0,.2);
	    -moz-box-shadow: 0 5px 10px rgba(0,0,0,.2);
	    box-shadow: 0 5px 10px rgba(0,0,0,.2);
	    -webkit-background-clip: padding-box;
	    -moz-background-clip: padding;
	    background-clip: padding-box;
	}

	.tt-suggestion {
			color: #6b6c6d;
			background: #fafafa;
	    display: block;
	    padding: 3px 20px;
	}

	.tt-suggestion.tt-is-under-cursor {
	    color: #fff;
	    background-color: #0081c2;
	    background-image: -moz-linear-gradient(top, #0088cc, #0077b3);
	    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#0088cc), to(#0077b3));
	    background-image: -webkit-linear-gradient(top, #0088cc, #0077b3);
	    background-image: -o-linear-gradient(top, #0088cc, #0077b3);
	    background-image: linear-gradient(to bottom, #0088cc, #0077b3);
	    background-repeat: repeat-x;
	    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff0088cc', endColorstr='#ff0077b3', GradientType=0)
	}

	.tt-suggestion.tt-is-under-cursor a {
	    color: #fff;
	}

	.tt-suggestion p {
	    margin: 0;
	}

	</style>


<!-- 	<div class="container"> -->
		<div class="row">
			<div class="input-group col-md-4 col-md-offset-4  col-sm-4 col-sm-offset-4  ">
        <input type="text" class="form-control" id="typeahead" placeholder="Where are we going?"  autocomplete="off" />
				<span class="input-group-addon"><i class="fa fa-search"></i></span>
			</div>
		</div>
	<!-- </div> -->

	<!-- <input class='typeahead' type="text" id="eventTypeahead" placeholder="Where are we going?"  autocomplete="off" /> -->

			<script type="text/javascript">
				$('#typeahead').typeahead([{
					name: 'events', 
					valueKey: 'title',
					remote: {url: '/event_suggestions/%QUERY'},
				}]).on('typeahead:selected', onSelected).on('typeahead:opened', onOpened);
					function onSelected($e, datum) {
						console.log("autocomplete match");
						console.log(datum);
						console.log('matched event with id', datum.id);
						var hfield = document.getElementById('hfield');
						// hfield.value = datum.id;
						submitSearch(datum.id);
					};
					function onOpened($e) {
						console.log('Focussed on search box');
					};

				//Focus on the search box
				$(document).on('ready', function() {
					$('#typeahead').focus();
				});

		 		//Handle a form submission through jquery!
        var submitSearch = function(id_or_query) {
	        // console.log('Debug: detected a suggestion selection!');
	        var submit_path = "/";
	        if (typeof id_or_query === 'number') {
	                //Suggestion accepted and submitted! - id_or_query is an event id
	                submit_path = '/events/show/' + id_or_query;
	        } else {
	                //Query - didn't match to an id
	                submit_path = '/events/show_all/' + id_or_query;
	        }
	        //Alrighty, let's go!
	        // alert('Debug: Submit_path:' + submit_path);
	        window.location.href=(submit_path); //Load the new page
        };


        
    //     $('#typeahead').keypress(function(e) {
	   //      var tt = $('.tt-suggestion');
	   //      console.log(tt.length);
	   //      //Ensure we don't submit a query if there's suggestions. Poor fix for now.
				//   if(e.which == 13 && tt.length < 1) {
				//   	var query = $('#typeahead').val();
				//     submitSearch(query);
				// 	}
				// });


			</script>
	
